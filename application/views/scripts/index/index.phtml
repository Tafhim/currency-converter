<style>
    a:link,
    a:visited
    {
        color: #0398CA;
    }

    span#zf-name
    {
        color: #91BE3F;
    }

    div#welcome
    {
        color: #FFFFFF;
        background-image: url(http://framework.zend.com/images/bkg_header.jpg);
        width:  100%;
        height: 100%;
        border: 2px solid #444444;
        overflow: hidden;
        text-align: center;
    }

    div#more-information
    {
        background-image: url(http://framework.zend.com/images/bkg_body-bottom.gif);
        height: 100%;
    }
</style>

<div class="container">
    <form id="currency-converter" method="post">
    <input type="text" name="convert_from"/>
    <select name="from_currency">
        <?php foreach( $this->rates as $rate ) { ?>
            <option value="<?php echo $rate->getCode(); ?>"><?php echo $rate->getCode(); ?></option>
        <?php } ?>
    </select>
    <select name="to_currency">
        <?php foreach( $this->rates as $rate ) { ?>
            <option value="<?php echo $rate->getCode(); ?>"><?php echo $rate->getCode(); ?></option>
        <?php } ?>
    </select>
    <input disabled type="text" name="convert_to"/>
    <input type="submit"/>
    </form>
</div>

<script type="text/javascript">
    (function($) {
        $(document).ready(function($) {
            // Call the api for currenty rates
            $(document).on('submit', '#currency-converter', function(evt) {
                // Stop the default request behavior
                evt.preventDefault();

                // Get all the form data for ajax 
                form = 'form#currency-converter';
                formData = new FormData();
                formData.append('convert_from', $(form).find('[name="convert_from"]').val());
                formData.append('from_currency', $(form).find('[name="from_currency"]').val());
                formData.append('to_currency', $(form).find('[name="to_currency"]').val());
                
                // Push an ajax post request with all the data
                $.post({
                    url: 'rate/convert/format/json',
                    dataType: 'json',
                    data: formData,
                    processData: false,
                    contentType: false,
                    success: function(response) {
                        console.log( response );
                    }
                });

                return false;

            });
        });
    })(jQuery);
</script>